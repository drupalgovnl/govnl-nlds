/**
 * @license EUPL-1.2
 * Copyright (c) 2021-2025 dictu
 */

@use "mixin" as mixin;
@use "pkg:@dictu/design-tokens/dist/timeline" as dictu-timeline-tokens;
@use "pkg:@dictu/heading/dist/index" as heading-component;
@use "pkg:@dictu/button/dist/index" as button-component;

.dictu-timeline {
  @include mixin.dictu-timeline;
}

.dictu-timeline__title {
  @include mixin.dictu-timeline-title;
}

.dictu-timeline__body {
  @include mixin.dictu-timeline-body;
}

.dictu-timeline__sub-list {
  @include mixin.dictu-timeline-sublist;
}

.dictu-timeline__element-button {
  @include mixin.dictu-timeline-element-button;
}

.dictu-timeline__element-button[aria-expanded="true"] .dictu-timeline__icon svg {
  @include mixin.dictu-timeline-icon-expanded;
}

.dictu-timeline__element-heading-body {
  @include mixin.dictu-timeline-element-heading-content;
}

.dictu-timeline__element-heading {
  @include mixin.dictu-timeline-element-heading;
}

.dictu-timeline__icon {
  @include mixin.dictu-timeline-icon;
}

.dictu-timeline__icon--heading {
  @include mixin.dictu-timeline-heading-icon;
}

.dictu-timeline__icon--subheading {
  @include mixin.dictu-timeline-subheading-icon;
}

.dictu-timeline__element-content-wrapper {
  @include mixin.dictu-timeline-element-content-wrapper;
}

.dictu-timeline__element-content {
  @include mixin.dictu-timeline-element-content;
}

// TODO: ::before etc doesn't match stylelint rules. No documentation
// found on whether that is deliberate or an oversight. Due to time
// constraints stylelint is disabled in this file.
/* stylelint-disable selector-nested-pattern */
.dictu-timeline__item {
  .dictu-timeline__element-heading-body::before {
    @include mixin.dictu-timeline-connector;
  }

  &:first-child {
    .dictu-timeline__element-heading-body::before {
      @include mixin.dictu-timeline-connector-start;
    }
  }

  &:last-child {
    &:not(:has(.dictu-timeline__sub-list:not([hidden]))) {
      .dictu-timeline__element-heading-body::before {
        @include mixin.dictu-timeline-connector-end;
      }

      .dictu-timeline__element-content-wrapper::before {
        display: none;
      }
    }

    &:has(.dictu-timeline__sub-list:not([hidden])) {
      .dictu-timeline__sub-item:last-child {
        .dictu-timeline__element-heading-body::before {
          @include mixin.dictu-timeline-connector-end;
        }

        .dictu-timeline__element-content-wrapper::before {
          display: none;
        }
      }
    }
  }

  .dictu-timeline__element-content-wrapper::before {
    @include mixin.dictu-timeline-connector;
  }

  .dictu-timeline__sub-list .dictu-timeline__element-heading-body::before {
    @include mixin.dictu-timeline-connector;
  }
}
/* stylelint-enable selector-nested-pattern */
